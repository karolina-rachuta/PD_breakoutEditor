!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){o(1)},function(e,t){(()=>{var e=1,t={desktopImage:1,tabletImage:1,mobileImage:1},o={},n=document.createElement("div");n.classList.add("flex-container","row");var a=document.createElement("div");a.classList.add("col-2","d-flex","flex-column","align-items-center","border-right","pt-5"),n.appendChild(a);var s=document.createElement("div");s.classList.add("col-7","d-flex","flex-column","align-items-center","border-right"),n.appendChild(s);var l=document.createElement("div");function i(n,a,s,l,d,c,p,u,m,f){if(console.log("placeHotspot-breakout",i),m){var h=d?s:parseFloat(s/a*100).toFixed(2)+"%",g=d?l:parseFloat(l/n*100).toFixed(2)+"%",b=document.createElement("li"),y=document.createElement("span"),v=document.createElement("div"),E=[h,g,m],L=E.join(","),x=u.type||"",k=Object.hasOwnProperty.call(t,x)?t[x]:1,C="hotspot-"+e;if(v.className="position-absolute rounded-circle border hotspot",v.id=C,b.className="hotspot-list",v.dataset.count=k,b.dataset.count=k+" - ",y.dataset.id=C,y.className="delete-hotspot js-close",y.dataset.hotspot=L,y.dataset.type=u.type,u.className="list-group-item d-flex justify-content-between align-items-center",b.innerHTML=`<span>Product: ${m}</span>`,b.dataset.coord=[h,g].join(","),b.dataset.productId=m,v.style="top:"+g+";left:"+h+";",c.appendChild(v),b.appendChild(y),p.appendChild(b),e++,t[x]++,y.addEventListener("click",(function(){this.closest("li").remove();var e=this.dataset.id,n=this.dataset.hotspot,a=this.dataset.type;document.getElementById(e).remove();for(let e=0;e<o.images.length;e++){if(o.images[e].type===a){var s=o.images[e].hotspots,l=s.map(e=>e.join(",")).indexOf(n);l>-1&&(s.splice(l,1),o.images[e].hotspots=s,r(),t[x]--)}}})),f)for(let e=0;e<o.images.length;e++){o.images[e].type===u.type&&(o.images[e].hotspots.push(E),r())}}}function d(e,t,o){console.log("toggleVisibility-breakout",d),document.querySelectorAll("."+e).forEach(e=>{e.classList.add(t),e.classList.remove(o)})}function c(e,t){console.log("handleImageSelection-breakout",c);var o=document.getElementById(e.type);for(let e=0;e<t.length;e++){var n=t[e];n.type!=o.getAttribute("id")&&d(n.type,"hidden","displayed")}d(e.type,"displayed","hidden"),document.querySelectorAll(".show-hide-image-button").forEach(e=>{e.classList.remove("btn-success")}),e.domElement.classList.add("btn-success")}function r(){console.log("submitHotpsotSelections-breakout",r),emit({type:"sfcc:value",payload:o})}function p(e){console.log("createHotspotInfoContainerDOMElements-breakout",p),console.log("createHotspotInfoContainerDOMElements:currentImage",e);var t=document.createElement("img"),o=document.createElement("ul"),n=document.createElement("p");n.classList.add("hotspots-info-title","text-uppercase","font-weight-bold","pt-5"),n.innerHTML=`Selected hotspots for ${e.displayText}:`,o.className="list-group py-1 ul-"+e.type;var a=document.createElement("div");a.setAttribute("id",e.type),a.classList.add("img-wrapper",e.type,"visib-hidden");let d=e.hotspots?e.hotspots:[];var c,r;t.src=e.src?e.src:"",a.appendChild(t),a.appendChild(t);var u=document.createElement("div");function m(t){console.log("setHotSpot-breakout",m),console.log("productPicker-breakout",t);var n=this.target.getBoundingClientRect(),s=this.clientX-n.left,l=this.clientY-n.top;i(c,r,s,l,!1,a,o,e,10,!0)}u.classList.add("float-right","hidden","hotspot-info-wrapper",e.type),u.appendChild(n),u.appendChild(o),l.appendChild(u),t.addEventListener("load",(function(){c=this.clientHeight,r=this.clientWidth,a.classList.add("hidden"),d&&d.length>0&&d.forEach((function(t){i(c,r,t[0],t[1],!0,a,o,e,t[2])}))})),t.addEventListener("click",(function(e){emit({type:"sfcc:breakout",payload:{id:"sfcc:productPicker"}},m.bind(e))})),s.appendChild(a)}function u(){console.log("createNavigationDOMElements-breakout",u);var e=document.createElement("button"),t=[{type:"desktopImage",text:"Load desktop image",domElement:document.createElement("button")},{type:"tabletImage",text:"Load tablet image",domElement:document.createElement("button")},{type:"mobileImage",text:"Load mobile image",domElement:e}];for(let e=0;e<t.length;e++){var o=t[e];a.appendChild(o.domElement),o.domElement.className="show-hide-image-button btn btn-secondary w-75 text-uppercase button-"+o.type,o.domElement.innerHTML=o.text,o.domElement.addEventListener("click",c.bind(this,o,t))}}l.classList.add("col-3","hotspots-list-wrapper","d-flex","flex-column","align-items-center"),n.appendChild(l),document.body.appendChild(n),subscribe("sfcc:ready",async e=>{console.log("subscribe-breakout",subscribe),console.log("value-breakout",e),o=Object.assign({},e.value),console.log("currentValue-breakout",o),u();var t=[];o.images.forEach(e=>{e.hotspots=e.hotspots&&"null"!==e.hotspots?e.hotspots:[],p(e),t.push(e.type)}),document.querySelectorAll("."+t[0]).forEach(e=>{e.classList.add("displayed")}),document.querySelector(".button-"+t[0]).classList.add("btn-success")})})()}]);